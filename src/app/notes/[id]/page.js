// // export default function Home() {
// //   return (
// //     <div className="bg-transparent p-4 h-screen">
// //       <div className="bg-[#0c0c0c] w-full p-2 flex flex-col h-full rounded-lg items-center">
// //         <div className="p-2 justify-center items-center fixed ">
// //           <p className="text-sm text-[#ffffff68]">Home</p>
// //         </div>
// //         <div className="h-full pt-10">
// //           <div className="h-full space-y-5 px-32 pt-10 overflow-scroll">
// //             <div className="flex">
// //               <h1 className="text-2xl font-black bg-linear-60 from-[#3600c0] via-[#8200a9] to-[#980000] bg-clip-text text-transparent">Home</h1>
// //             </div>
// //             <div>
// //               <p className="text-[#ffffffbe]">jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k
// //                 jnsndb a;sjdka awid vmnaiduv ,an iufv lh ihe ifh inefv  eijf
// //                 kdh lk ienfkm ef<br />
// //                 kjdfkjlmnsnvoinml kmlklj  nl;kfkj aojf m fj fk mkfj kf k

// //               </p>
// //             </div>
// //           </div>
// //         </div>
// //       </div>
// //     </div>
// //   );
// // }

// import fs from "fs";
// import path from "path";

// export async function generateStaticParams() {
//   const filePath = path.join(process.cwd(), "data", "notedata.json");
//   const file = fs.readFileSync(filePath, "utf-8");
//   const data = JSON.parse(file);

//   return data.nodes.map((node) => ({
//     id: node.id,
//   }));
// }

// export default async function NotePage({ params }) {
//   const { id } = params;

//   const filePath = path.join(process.cwd(), "data", "notedata.json");
//   const file = fs.readFileSync(filePath, "utf-8");
//   const data = JSON.parse(file);

//   const note = data.nodes.find((n) => n.id === id);

//   if (!note) return <div className="p-4">Note not found</div>;

//   return (
//     <div className="bg-transparent p-4 h-screen">
//       <div className="bg-[#0c0c0c] w-full p-2 flex flex-col h-full rounded-lg items-center">
//         <div className="p-2 justify-center items-center fixed ">
//           <p className="text-sm text-[#ffffff68]">{note.label}</p>
//         </div>
//         <div className="h-full w-full pt-10">
//           <div className="h-full w-full space-y-5 px-32 pt-10 overflow-scroll">
//             <div className="flex">
//               <h1 className="text-2xl font-black bg-linear-60 from-[#3600c0] via-[#8200a9] to-[#980000] bg-clip-text text-transparent">
//                 {note.label}
//               </h1>
//             </div>
//             <div className="w-full h-full">
//               {note.content || "No content yet."}
//             </div>
//           </div>
//         </div>
//       </div>
//     </div>
//   );
// }
"use client";

import { useEffect, useState } from "react";

export default function NotePage({ params }) {
  const { id } = params;
  const [note, setNote] = useState(null);
  const [title, setTitle] = useState("");
  const [content, setContent] = useState("");
  const [status, setStatus] = useState("");

  useEffect(() => {
    fetch("/api/notes")
      .then((res) => res.json())
      .then((data) => {
        const foundNote = data.nodes.find((n) => n.id === id);
        if (foundNote) {
          setNote(foundNote);
          setTitle(foundNote.title);
          setContent(foundNote.content);
        }
      });
  }, [id]);

  const handleSave = async () => {
    setStatus("Saving...");
    const res = await fetch("/api/notes", {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ id, title, content })
    });

    const result = await res.json();
    setStatus("Saved!");
    setTimeout(() => setStatus(""), 2000);
  };

  if (!note) return <div className="p-6 text-white">Note not found</div>;

  return (
    <div className="p-6 text-white max-w-4xl mx-auto">
      <input
        type="text"
        value={title}
        onChange={(e) => setTitle(e.target.value)}
        className="text-3xl font-bold mb-4 bg-transparent border-b border-white w-full focus:outline-none"
      />
      <textarea
        value={content}
        onChange={(e) => setContent(e.target.value)}
        className="w-full bg-black border border-white rounded-md p-4 h-[60vh] resize-none focus:outline-none"
      />
      <button
        onClick={handleSave}
        className="bg-white text-black px-4 py-2 mt-4 rounded hover:bg-opacity-90"
      >
        Save
      </button>
      {status && <p className="mt-2 text-green-400 text-sm">{status}</p>}
    </div>
  );
}
